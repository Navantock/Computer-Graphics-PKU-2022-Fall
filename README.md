# Hand

**学号：190001174   姓名：巫鸿飞   院系：化学与分子工程学院**

北京大学图形学课程小作业代码。

#### 1.手势与动作

实现了三个手势动画包括弹指，握拳，挥手。另外实现了各个手指的独立连续可暂停动画(参见**键盘交互**部分)。此外，实现了数字0~3，握拳等几个静态动作以供互动游戏使用。

#### 2.UI界面

使用imgui库绘制了简单的ui界面。其中ui按钮选项包括了各种实现的动作，动画以及一个可以进行简单交互的小游戏(可在ui界面内查看规则与说明)。当游戏失败时会触发一个并不恶意的嘲讽手势动画。

#### 3.键盘交互

键盘交互包括以下键位交互：

**ESC**: 退出界面，关闭程序。

**SPACE**：复位(使模型恢复到初始状态)

**Q**：大拇指第一指节的连续可暂停动画。

**W**：食指第一指节的连续可暂停动画。

**E**：中指第一指节的连续可暂停动画。

**R**：无名指第一指节的连续可暂停动画。

**T**：小拇指第一指节的连续可暂停动画。

注：连续可暂停动画指长按对应键位期间产生动画，松开即可停止。再次长按会接着播放。考虑到合理性，设置了周期性的0~75°旋转角度。事实上如果对15个关节都采用相同方法处理，可以让用户自己调节想要的手势，考虑到代码可读性，在这里只做了所有手指的第一关节示意。理论上这些键位应该可以完全并行。然而实际上似乎最多只能同时进行四个按键的处理。

#### 4.鼠标交互

这里指除了UI界面交互以外的鼠标交互方法。

**鼠标滚轮**可以调节fov实现缩放功能。

**勾选**“Focus on origin”情况下，视角始终设定为原点，只能调节相机位置。

**取消勾选**“Focus on origin”情况下，**长按**鼠标右键状态下，可以进行相机的视角旋转。

#### 5.相机平滑过渡

UI界面中Camera Transition选项卡下，提供了相机平滑过渡的演示功能。

**Save initial camera**: 存储当前状态为相机初始状态

**Save ending camera**: 存储当前状态为相机终止状态

**Run camera transition**: 演示从当前存储的初始状态到终止状态的平滑过渡

在选项卡下可以看到当前相机状态，包括相机位置向量(Position)， 相机注视方向向量(Front), 相机视野大小(fov)。

平滑过渡的实现为对Position与fov进行线性插值，对Front进行四元数插值的旋转。

改变其中一个或多个相机属性以及播放手势动画同时的过渡演示都是合法操作。您可以选定**任何**位置在**任何**时候运行过渡演示。

#### 6.项目文件结构

除了课程提供的基础代码以外作了以下增改：

在**\src**目录下：

1.添加了**gestures.h**, 主要包含所有手势在骨骼模型上的实现。

2.添加了**callbacks.h**, 主要包含键盘鼠标输入处理以及UI绘制函数。

在**\third_party**目录下:

导入了imgui库用以实现ui界面。

> 注：Assimp是经过裁剪的版本，只支持FBX文件的导入